<?xml version="1.0" encoding="utf-8"?><Report xmlns="http://schemas.microsoft.com/sqlserver/reporting/2008/01/reportdefinition" xmlns:rd="http://schemas.microsoft.com/SQLServer/reporting/reportdesigner"><Body><ReportItems><Tablix Name="Tablix1"><TablixBody><TablixColumns><TablixColumn><Width>5.23833in</Width></TablixColumn></TablixColumns><TablixRows><TablixRow><Height>1.47917in</Height><TablixCells><TablixCell><CellContents><Rectangle Name="Rectangle1"><ReportItems><Tablix Name="Tablix2"><TablixBody><TablixColumns><TablixColumn><Width>1.6493in</Width></TablixColumn><TablixColumn><Width>1.6493in</Width></TablixColumn><TablixColumn><Width>1.6493in</Width></TablixColumn></TablixColumns><TablixRows><TablixRow><Height>0.26042in</Height><TablixCells><TablixCell><CellContents><Subreport Name="Subreport1"><ReportName>PMSJobDescResposibilities</ReportName><Parameters><Parameter Name="role_id"><Value>=Fields!role_id.Value</Value></Parameter><Parameter Name="phase_id"><Value>=Parameters!Phase_id.Value</Value></Parameter><Parameter Name="pos_id"><Value>=Parameters!position_id.Value</Value></Parameter></Parameters><Style><Border><Style>None</Style></Border></Style></Subreport><ColSpan>3</ColSpan></CellContents></TablixCell><TablixCell /><TablixCell /></TablixCells></TablixRow></TablixRows></TablixBody><TablixColumnHierarchy><TablixMembers><TablixMember /><TablixMember /><TablixMember /></TablixMembers></TablixColumnHierarchy><TablixRowHierarchy><TablixMembers><TablixMember><Group Name="Details1" /></TablixMember></TablixMembers></TablixRowHierarchy><Top>0.77778in</Top><Height>0.26042in</Height><Width>4.9479in</Width><Style><Border><Style>None</Style></Border></Style></Tablix><Textbox Name="role_name"><CanGrow>true</CanGrow><KeepTogether>true</KeepTogether><Paragraphs><Paragraph><TextRuns><TextRun><Value>=Fields!role_name.Value</Value><Style><FontSize>11pt</FontSize></Style></TextRun></TextRuns><Style><TextAlign>Left</TextAlign></Style></Paragraph></Paragraphs><rd:DefaultName>role_name</rd:DefaultName><Top>0.26389in</Top><Left>1.67565cm</Left><Height>0.25in</Height><Width>4.17711in</Width><ZIndex>1</ZIndex><Style><Border><Style>None</Style></Border><PaddingLeft>2pt</PaddingLeft><PaddingRight>2pt</PaddingRight><PaddingTop>2pt</PaddingTop><PaddingBottom>2pt</PaddingBottom></Style></Textbox><Textbox Name="Textbox8"><CanGrow>true</CanGrow><KeepTogether>true</KeepTogether><Paragraphs><Paragraph><TextRuns><TextRun><Value>=Fields!weight_.Value</Value><Style><FontSize>11pt</FontSize></Style></TextRun></TextRuns><Style><TextAlign>Left</TextAlign></Style></Paragraph></Paragraphs><rd:DefaultName>Textbox7</rd:DefaultName><Top>0.51389in</Top><Left>1.67565cm</Left><Height>0.25in</Height><Width>4.18753in</Width><ZIndex>2</ZIndex><Style><Border><Style>None</Style></Border><PaddingLeft>2pt</PaddingLeft><PaddingRight>2pt</PaddingRight><PaddingTop>2pt</PaddingTop><PaddingBottom>2pt</PaddingBottom></Style></Textbox><Textbox Name="Textbox9"><CanGrow>true</CanGrow><KeepTogether>true</KeepTogether><Paragraphs><Paragraph><TextRuns><TextRun><Value>Role:</Value><Style><FontSize>11pt</FontSize></Style></TextRun></TextRuns><Style /></Paragraph></Paragraphs><rd:DefaultName>Textbox9</rd:DefaultName><Top>0.26389in</Top><Height>0.25in</Height><Width>0.6597in</Width><ZIndex>3</ZIndex><Style><Border><Style>None</Style></Border><PaddingLeft>2pt</PaddingLeft><PaddingRight>2pt</PaddingRight><PaddingTop>2pt</PaddingTop><PaddingBottom>2pt</PaddingBottom></Style></Textbox><Textbox Name="Textbox10"><CanGrow>true</CanGrow><KeepTogether>true</KeepTogether><Paragraphs><Paragraph><TextRuns><TextRun><Value>Weight:</Value><Style><FontSize>11pt</FontSize></Style></TextRun></TextRuns><Style /></Paragraph></Paragraphs><rd:DefaultName>Textbox1</rd:DefaultName><Top>0.51389in</Top><Left>0.06175cm</Left><Height>0.25in</Height><Width>0.63539in</Width><ZIndex>4</ZIndex><Style><Border><Style>None</Style></Border><PaddingLeft>2pt</PaddingLeft><PaddingRight>2pt</PaddingRight><PaddingTop>2pt</PaddingTop><PaddingBottom>2pt</PaddingBottom></Style></Textbox></ReportItems><KeepTogether>true</KeepTogether><Style><Border><Style>None</Style></Border></Style></Rectangle></CellContents></TablixCell></TablixCells></TablixRow></TablixRows></TablixBody><TablixColumnHierarchy><TablixMembers><TablixMember /></TablixMembers></TablixColumnHierarchy><TablixRowHierarchy><TablixMembers><TablixMember><Group Name="Details"><GroupExpressions><GroupExpression>=Fields!role_name.Value</GroupExpression></GroupExpressions></Group></TablixMember></TablixMembers></TablixRowHierarchy><KeepTogether>true</KeepTogether><DataSetName>DataSet1</DataSetName><Top>2.58091cm</Top><Left>0.06174cm</Left><Height>1.47917in</Height><Width>5.23833in</Width><Visibility><Hidden>=CountRows("DataSet1")&lt;1</Hidden></Visibility><Style><Border><Style>None</Style></Border></Style></Tablix><Tablix Name="Tablix4"><TablixBody><TablixColumns><TablixColumn><Width>0.57637in</Width></TablixColumn><TablixColumn><Width>0.70834in</Width></TablixColumn></TablixColumns><TablixRows><TablixRow><Height>0.25in</Height><TablixCells><TablixCell><CellContents><Textbox Name="Textbox13"><CanGrow>true</CanGrow><KeepTogether>true</KeepTogether><Paragraphs><Paragraph><TextRuns><TextRun><Value>Weight :</Value><Style /></TextRun></TextRuns><Style /></Paragraph></Paragraphs><rd:DefaultName>Textbox12</rd:DefaultName><Style><Border><Color>LightGrey</Color><Style>Solid</Style></Border><PaddingLeft>2pt</PaddingLeft><PaddingRight>2pt</PaddingRight><PaddingTop>2pt</PaddingTop><PaddingBottom>2pt</PaddingBottom></Style></Textbox></CellContents></TablixCell><TablixCell><CellContents><Textbox Name="jobName2"><CanGrow>true</CanGrow><KeepTogether>true</KeepTogether><Paragraphs><Paragraph><TextRuns><TextRun><Value>=Fields!JobDescriptionWeight.Value</Value><Style /></TextRun></TextRuns><Style><TextAlign>Left</TextAlign></Style></Paragraph></Paragraphs><rd:DefaultName>jobName</rd:DefaultName><Style><Border><Color>LightGrey</Color><Style>Solid</Style></Border><PaddingLeft>2pt</PaddingLeft><PaddingRight>2pt</PaddingRight><PaddingTop>2pt</PaddingTop><PaddingBottom>2pt</PaddingBottom></Style></Textbox></CellContents></TablixCell></TablixCells></TablixRow></TablixRows></TablixBody><TablixColumnHierarchy><TablixMembers><TablixMember /><TablixMember /></TablixMembers></TablixColumnHierarchy><TablixRowHierarchy><TablixMembers><TablixMember><Group Name="Details3" /></TablixMember></TablixMembers></TablixRowHierarchy><DataSetName>SectionsWeights</DataSetName><Top>0.56818in</Top><Height>0.25in</Height><Width>1.28471in</Width><ZIndex>1</ZIndex><Visibility><Hidden>=CountRows("DataSet1")&lt;1</Hidden></Visibility><Style><Border><Style>None</Style></Border></Style></Tablix><Tablix Name="Tablix5"><TablixBody><TablixColumns><TablixColumn><Width>0.57637in</Width></TablixColumn><TablixColumn><Width>0.70834in</Width></TablixColumn></TablixColumns><TablixRows><TablixRow><Height>0.25in</Height><TablixCells><TablixCell><CellContents><Textbox Name="Textbox14"><CanGrow>true</CanGrow><KeepTogether>true</KeepTogether><Paragraphs><Paragraph><TextRuns><TextRun><Value>Value :</Value><Style /></TextRun></TextRuns><Style /></Paragraph></Paragraphs><rd:DefaultName>Textbox12</rd:DefaultName><Style><Border><Color>LightGrey</Color><Style>Solid</Style></Border><PaddingLeft>2pt</PaddingLeft><PaddingRight>2pt</PaddingRight><PaddingTop>2pt</PaddingTop><PaddingBottom>2pt</PaddingBottom></Style></Textbox></CellContents></TablixCell><TablixCell><CellContents><Textbox Name="jobName3"><CanGrow>true</CanGrow><KeepTogether>true</KeepTogether><Paragraphs><Paragraph><TextRuns><TextRun><Value>=IIF(IsNothing(Fields!weightPos.Value),Fields!sectionValue.Value*Fields!weightDefault.Value/(100*Fields!steps.Value), Fields!sectionValue.Value*Fields!weightPos.Value/(100*Fields!steps.Value))</Value><Style /></TextRun></TextRuns><Style><TextAlign>Left</TextAlign></Style></Paragraph></Paragraphs><rd:DefaultName>jobName</rd:DefaultName><Style><Border><Color>LightGrey</Color><Style>Solid</Style></Border><PaddingLeft>2pt</PaddingLeft><PaddingRight>2pt</PaddingRight><PaddingTop>2pt</PaddingTop><PaddingBottom>2pt</PaddingBottom></Style></Textbox></CellContents></TablixCell></TablixCells></TablixRow></TablixRows></TablixBody><TablixColumnHierarchy><TablixMembers><TablixMember /><TablixMember /></TablixMembers></TablixColumnHierarchy><TablixRowHierarchy><TablixMembers><TablixMember><Group Name="Details4" /></TablixMember></TablixMembers></TablixRowHierarchy><DataSetName>SectionValue</DataSetName><Top>0.56818in</Top><Left>1.28471in</Left><Height>0.25in</Height><Width>1.28471in</Width><ZIndex>2</ZIndex><Visibility><Hidden>=CountRows("DataSet1")&lt;1</Hidden></Visibility><Style><Border><Style>None</Style></Border></Style></Tablix><Textbox Name="Textbox27"><CanGrow>true</CanGrow><KeepTogether>true</KeepTogether><Paragraphs><Paragraph><TextRuns><TextRun><Value>Job description section :</Value><Style><FontWeight>Bold</FontWeight></Style></TextRun></TextRuns><Style /></Paragraph></Paragraphs><rd:DefaultName>Textbox27</rd:DefaultName><Top>0.1793in</Top><Left>0.04862in</Left><Height>0.25in</Height><Width>3.41667in</Width><ZIndex>3</ZIndex><Visibility><Hidden>=CountRows("DataSet1")&lt;1</Hidden></Visibility><Style><Border><Style>None</Style></Border><PaddingLeft>2pt</PaddingLeft><PaddingRight>2pt</PaddingRight><PaddingTop>2pt</PaddingTop><PaddingBottom>2pt</PaddingBottom></Style></Textbox></ReportItems><Height>3.11333in</Height><Style /></Body><Width>8.15974in</Width><Page><LeftMargin>1in</LeftMargin><RightMargin>1in</RightMargin><TopMargin>1in</TopMargin><BottomMargin>1in</BottomMargin><Style /></Page><AutoRefresh>0</AutoRefresh><DataSources><DataSource Name="SharedDataSource"><DataSourceReference>SharedDataSource</DataSourceReference><rd:SecurityType>None</rd:SecurityType><rd:DataSourceID>434b83b7-d9e2-4ca7-ae52-0ea54f1870c1</rd:DataSourceID></DataSource></DataSources><DataSets><DataSet Name="DataSet1"><Query><DataSourceName>SharedDataSource</DataSourceName><CommandText>select role_.Id role_id, role_.Name role_name,pos.Id pos_id,role_.Weight weight_ from Position pos 
left join JobDescription jobdesc on pos.JobDescription_id=jobdesc.Id
left join JDRole role_ on jobdesc.Id=role_.JobDescription_id
where pos.IsVertualDeleted=0 and  role_.IsVertualDeleted=0 and jobdesc.IsVertualDeleted=0</CommandText><rd:UseGenericDesigner>true</rd:UseGenericDesigner></Query><Fields><Field Name="role_id"><DataField>role_id</DataField><rd:TypeName>System.Int32</rd:TypeName></Field><Field Name="role_name"><DataField>role_name</DataField><rd:TypeName>System.String</rd:TypeName></Field><Field Name="pos_id"><DataField>pos_id</DataField><rd:TypeName>System.Int32</rd:TypeName></Field><Field Name="weight_"><DataField>weight_</DataField><rd:TypeName>System.Single</rd:TypeName></Field></Fields><Filters><Filter><FilterExpression>=Fields!pos_id.Value</FilterExpression><Operator>Equal</Operator><FilterValues><FilterValue>=Parameters!position_id.Value</FilterValue></FilterValues></Filter></Filters></DataSet><DataSet Name="SectionsWeights"><Query><DataSourceName>SharedDataSource</DataSourceName><QueryParameters><QueryParameter Name="@position_id"><Value>=Parameters!position_id.Value</Value></QueryParameter><QueryParameter Name="@Phase_id"><Value>=Parameters!Phase_id.Value</Value></QueryParameter></QueryParameters><CommandText>IF NOT EXISTS (SELECT        templatePositions.Id
                                  FROM            AppraisalPhaseWorkflow phaseWorkflow LEFT JOIN
                                                            AppraisalPhase phase ON phase.Id = phaseWorkflow.Phase_Id LEFT JOIN
                                                            AppraisalTemplateSetting templateSetting ON templateSetting.Id = phase.AppraisalPhaseSetting_id LEFT JOIN
                                                            TemplateAppraisalPositions templatePositions ON templatePositions.AppraisalTemplateSetting_id = templateSetting.Id LEFT JOIN
                                                            Position pos ON pos.Id = templatePositions.Position_id LEFT JOIN
                                                            AppraisalTemplate template ON template.Id = templatePositions.AppraisalTemplate_id
                                  WHERE        phaseWorkflow.IsVertualDeleted = 0 AND phase.IsVertualDeleted = 0 AND templateSetting.IsVertualDeleted = 0 AND 
                                                            templatePositions.IsVertualDeleted = 0 AND pos.IsVertualDeleted = 0 AND template.IsVertualDeleted = 0 AND pos.Id = @position_id AND 
                                                            phase.Id = @Phase_id)
    SELECT        template.CompetencyWeight, template.JobDescriptionWeight, template.ObjectiveWeight
     FROM            AppraisalTemplate template LEFT JOIN
                              AppraisalTemplateSetting templateSetting ON template.Id = templateSetting.DefaultTemplate_id
     WHERE        templateSetting.IsVertualDeleted = 0 AND template.IsVertualDeleted = 0 ELSE
                                  SELECT     top(1)   template.CompetencyWeight, template.JobDescriptionWeight, template.ObjectiveWeight
                                   FROM            AppraisalPhaseWorkflow phaseWorkflow LEFT JOIN
                                                            AppraisalPhase phase ON phase.Id = phaseWorkflow.Phase_Id LEFT JOIN
                                                            AppraisalTemplateSetting templateSetting ON templateSetting.Id = phase.AppraisalPhaseSetting_id LEFT JOIN
                                                            TemplateAppraisalPositions templatePositions ON templatePositions.AppraisalTemplateSetting_id = templateSetting.Id LEFT JOIN
                                                            Position pos ON pos.Id = templatePositions.Position_id LEFT JOIN
                                                            AppraisalTemplate template ON template.Id = templatePositions.AppraisalTemplate_id
                                   WHERE        phaseWorkflow.IsVertualDeleted = 0 AND phase.IsVertualDeleted = 0 AND templateSetting.IsVertualDeleted = 0 AND 
                                                            templatePositions.IsVertualDeleted = 0 AND pos.IsVertualDeleted = 0 AND template.IsVertualDeleted = 0 AND pos.Id = @position_id AND 
                                                            phase.Id = @Phase_id</CommandText></Query><Fields><Field Name="CompetencyWeight"><DataField>CompetencyWeight</DataField><rd:TypeName>System.Single</rd:TypeName></Field><Field Name="JobDescriptionWeight"><DataField>JobDescriptionWeight</DataField><rd:TypeName>System.Single</rd:TypeName></Field><Field Name="ObjectiveWeight"><DataField>ObjectiveWeight</DataField><rd:TypeName>System.Single</rd:TypeName></Field></Fields></DataSet><DataSet Name="SectionValue"><Query><DataSourceName>SharedDataSource</DataSourceName><QueryParameters><QueryParameter Name="@position_id"><Value>=Parameters!position_id.Value</Value></QueryParameter><QueryParameter Name="@Phase_id"><Value>=Parameters!Phase_id.Value</Value></QueryParameter></QueryParameters><CommandText>
 
 select phase.Id phaseId,pos.Id posId,job.Name jobName ,
(
select Sum(t1.sumall)
  from JDRole jd_Role 
    left join 
     ( 
        select (JDRole.Weight * SUM((appJob.Weight*appJob.Rate)/100)) / 100 sumall, JDRole.Weight _weight, JDRole.Id _id
        from Appraisal app 
left join AppraisalJobDescription appJob on appJob.PhaseAppraisal_id=app.Id 
left join Responsibility respo on appJob.Responsibility_id = respo.Id  
left join JDRole jdRole on respo.Role_id = jdRole.Id  
where app.PhaseWorkflow_id=phaseWorkflow.Id group by JDRole.Weight, JDRole.Id
    ) t1 on jd_Role.Id = t1._id)sectionValue,
(select count(*) from WorkflowStep step where step.Workflow_id=_Workflow.Id and step.Status=0) steps
,(select sum(template.JobDescriptionWeight)/count(template.JobDescriptionWeight) from AppraisalPhaseWorkflow phaseWorkflow 
left join AppraisalPhase phase on phase.Id=phaseWorkflow.Phase_Id
left join AppraisalTemplateSetting templateSetting on templateSetting.Id=phase.AppraisalPhaseSetting_id
left join TemplateAppraisalPositions templatePositions on templatePositions.AppraisalTemplateSetting_id=templateSetting.Id
left join Position pos on pos.Id=templatePositions.Position_id
left join AppraisalTemplate template on template.Id=templatePositions.AppraisalTemplate_id
where phaseWorkflow.IsVertualDeleted=0 and phase.IsVertualDeleted=0 and
 templateSetting.IsVertualDeleted=0 and templatePositions.IsVertualDeleted=0 and
 pos.IsVertualDeleted=0 and template.IsVertualDeleted=0 and pos.Id=@position_id and phase.Id=@Phase_id) as weightPos,( select sum(template.JobDescriptionWeight) from  AppraisalTemplate template 
left join AppraisalTemplateSetting templateSetting on template.Id=templateSetting.DefaultTemplate_id
where  templateSetting.IsVertualDeleted=0 and  template.IsVertualDeleted=0) as weightDefault
from AppraisalPhaseWorkflow phaseWorkflow 
left join AppraisalPhase phase on phase.Id=phaseWorkflow.Phase_Id
left join Position pos on pos.Id=phaseWorkflow.Position_id
left join JobDescription job on job.Id=pos.JobDescription_id
left join WorkflowItem _Workflow on _Workflow.Id=phaseWorkflow.WorkflowItem_id
where phaseWorkflow.IsVertualDeleted=0 and phase.IsVertualDeleted=0 and
 pos.IsVertualDeleted=0  and job.IsVertualDeleted=0 and _Workflow.IsVertualDeleted=0 and pos.Id=@position_id and phase.Id=@Phase_id</CommandText></Query><Fields><Field Name="phaseId"><DataField>phaseId</DataField><rd:TypeName>System.Int32</rd:TypeName></Field><Field Name="posId"><DataField>posId</DataField><rd:TypeName>System.Int32</rd:TypeName></Field><Field Name="jobName"><DataField>jobName</DataField><rd:TypeName>System.String</rd:TypeName></Field><Field Name="sectionValue"><DataField>sectionValue</DataField><rd:TypeName>System.Double</rd:TypeName></Field><Field Name="steps"><DataField>steps</DataField><rd:TypeName>System.Int32</rd:TypeName></Field><Field Name="weightPos"><DataField>weightPos</DataField><rd:TypeName>System.Double</rd:TypeName></Field><Field Name="weightDefault"><DataField>weightDefault</DataField><rd:TypeName>System.Double</rd:TypeName></Field></Fields></DataSet></DataSets><ReportParameters><ReportParameter Name="Phase_id"><DataType>Integer</DataType><Prompt>Phase_id</Prompt></ReportParameter><ReportParameter Name="position_id"><DataType>Integer</DataType><Prompt>position_id</Prompt></ReportParameter></ReportParameters><Language>en-US</Language><ConsumeContainerWhitespace>true</ConsumeContainerWhitespace><rd:ReportUnitType>Inch</rd:ReportUnitType><rd:ReportID>dafff65b-a3f7-4036-8475-d17e1e171638</rd:ReportID></Report>