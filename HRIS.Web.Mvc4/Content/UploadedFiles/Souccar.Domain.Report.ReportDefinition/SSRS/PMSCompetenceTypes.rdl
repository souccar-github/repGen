<?xml version="1.0" encoding="utf-8"?><Report xmlns="http://schemas.microsoft.com/sqlserver/reporting/2008/01/reportdefinition" xmlns:rd="http://schemas.microsoft.com/SQLServer/reporting/reportdesigner"><Body><ReportItems><Tablix Name="Tablix1"><TablixBody><TablixColumns><TablixColumn><Width>8.31249in</Width></TablixColumn></TablixColumns><TablixRows><TablixRow><Height>1.1736in</Height><TablixCells><TablixCell><CellContents><Rectangle Name="Rectangle1"><ReportItems><Textbox Name="Textbox2"><CanGrow>true</CanGrow><KeepTogether>true</KeepTogether><Paragraphs><Paragraph><TextRuns><TextRun><Value>=Fields!comTypeName.Value</Value><Style><FontSize>11pt</FontSize></Style></TextRun></TextRuns><Style /></Paragraph></Paragraphs><rd:DefaultName>Textbox2</rd:DefaultName><Top>0.12847in</Top><Height>0.25in</Height><Width>4.06945in</Width><Style><Border><Style>None</Style></Border><PaddingLeft>2pt</PaddingLeft><PaddingRight>2pt</PaddingRight><PaddingTop>2pt</PaddingTop><PaddingBottom>2pt</PaddingBottom></Style></Textbox><Subreport Name="Subreport5"><ReportName>PMSCompetency</ReportName><Parameters><Parameter Name="phase_id"><Value>=Parameters!Phase_id.Value</Value></Parameter><Parameter Name="PosId"><Value>=Parameters!posId.Value</Value></Parameter><Parameter Name="comtypeId"><Value>=Fields!comTypeId.Value</Value></Parameter></Parameters><Top>0.58334in</Top><Height>0.38541in</Height><Width>5.45832in</Width><ZIndex>1</ZIndex><Style><Border><Style>None</Style></Border></Style></Subreport></ReportItems><KeepTogether>true</KeepTogether><Style><Border><Style>None</Style></Border></Style></Rectangle></CellContents></TablixCell></TablixCells></TablixRow></TablixRows></TablixBody><TablixColumnHierarchy><TablixMembers><TablixMember /></TablixMembers></TablixColumnHierarchy><TablixRowHierarchy><TablixMembers><TablixMember><Group Name="Details"><GroupExpressions><GroupExpression>=Fields!comTypeId.Value</GroupExpression></GroupExpressions></Group></TablixMember></TablixMembers></TablixRowHierarchy><KeepTogether>true</KeepTogether><DataSetName>DataSet1</DataSetName><Top>0.86292in</Top><Height>1.1736in</Height><Width>8.31249in</Width><Visibility><Hidden>=Sum(Fields!sectionValue.Value, "DataSet2Values")&lt;1</Hidden></Visibility><Style><Border><Style>None</Style></Border></Style></Tablix><Textbox Name="Textbox3"><CanGrow>true</CanGrow><KeepTogether>true</KeepTogether><Paragraphs><Paragraph><TextRuns><TextRun><Value>Competency section:</Value><Style><FontWeight>Bold</FontWeight></Style></TextRun></TextRuns><Style /></Paragraph></Paragraphs><rd:DefaultName>Textbox3</rd:DefaultName><Top>0.11681in</Top><Height>0.25in</Height><Width>4.06945in</Width><ZIndex>1</ZIndex><Visibility><Hidden>=Sum(Fields!sectionValue.Value, "DataSet2Values")&lt;1</Hidden></Visibility><Style><Border><Style>None</Style></Border><PaddingLeft>2pt</PaddingLeft><PaddingRight>2pt</PaddingRight><PaddingTop>2pt</PaddingTop><PaddingBottom>2pt</PaddingBottom></Style></Textbox><Tablix Name="Tablix4"><TablixBody><TablixColumns><TablixColumn><Width>0.61804in</Width></TablixColumn><TablixColumn><Width>0.70834in</Width></TablixColumn></TablixColumns><TablixRows><TablixRow><Height>0.25in</Height><TablixCells><TablixCell><CellContents><Textbox Name="Textbox13"><CanGrow>true</CanGrow><KeepTogether>true</KeepTogether><Paragraphs><Paragraph><TextRuns><TextRun><Value>Weight :</Value><Style /></TextRun></TextRuns><Style><TextAlign>Center</TextAlign></Style></Paragraph></Paragraphs><rd:DefaultName>Textbox12</rd:DefaultName><Style><Border><Color>LightGrey</Color><Style>Solid</Style></Border><PaddingLeft>2pt</PaddingLeft><PaddingRight>2pt</PaddingRight><PaddingTop>2pt</PaddingTop><PaddingBottom>2pt</PaddingBottom></Style></Textbox></CellContents></TablixCell><TablixCell><CellContents><Textbox Name="jobName2"><CanGrow>true</CanGrow><KeepTogether>true</KeepTogether><Paragraphs><Paragraph><TextRuns><TextRun><Value>=Fields!CompetencyWeight.Value</Value><Style /></TextRun></TextRuns><Style><TextAlign>Left</TextAlign></Style></Paragraph></Paragraphs><rd:DefaultName>jobName</rd:DefaultName><Style><Border><Color>LightGrey</Color><Style>Solid</Style></Border><PaddingLeft>2pt</PaddingLeft><PaddingRight>2pt</PaddingRight><PaddingTop>2pt</PaddingTop><PaddingBottom>2pt</PaddingBottom></Style></Textbox></CellContents></TablixCell></TablixCells></TablixRow></TablixRows></TablixBody><TablixColumnHierarchy><TablixMembers><TablixMember /><TablixMember /></TablixMembers></TablixColumnHierarchy><TablixRowHierarchy><TablixMembers><TablixMember /></TablixMembers></TablixRowHierarchy><DataSetName>DataSetWeights</DataSetName><Top>0.49875in</Top><Height>0.25in</Height><Width>1.32638in</Width><ZIndex>2</ZIndex><Visibility><Hidden>=Sum(Fields!sectionValue.Value, "DataSet2Values")&lt;1</Hidden></Visibility><Style><Border><Style>None</Style></Border></Style></Tablix><Tablix Name="Tablix5"><TablixBody><TablixColumns><TablixColumn><Width>0.57637in</Width></TablixColumn><TablixColumn><Width>0.70834in</Width></TablixColumn></TablixColumns><TablixRows><TablixRow><Height>0.25in</Height><TablixCells><TablixCell><CellContents><Textbox Name="Textbox14"><CanGrow>true</CanGrow><KeepTogether>true</KeepTogether><Paragraphs><Paragraph><TextRuns><TextRun><Value>Value :</Value><Style /></TextRun></TextRuns><Style /></Paragraph></Paragraphs><rd:DefaultName>Textbox12</rd:DefaultName><Style><Border><Color>LightGrey</Color><Style>Solid</Style></Border><PaddingLeft>2pt</PaddingLeft><PaddingRight>2pt</PaddingRight><PaddingTop>2pt</PaddingTop><PaddingBottom>2pt</PaddingBottom></Style></Textbox></CellContents></TablixCell><TablixCell><CellContents><Textbox Name="jobName3"><CanGrow>true</CanGrow><KeepTogether>true</KeepTogether><Paragraphs><Paragraph><TextRuns><TextRun><Value>=IIF(IsNothing(Fields!weightPos.Value),Fields!sectionValue.Value*Fields!weightDefault.Value/(100*Fields!steps.Value), Fields!sectionValue.Value*Fields!weightPos.Value/(100*Fields!steps.Value))</Value><Style /></TextRun></TextRuns><Style><TextAlign>Center</TextAlign></Style></Paragraph></Paragraphs><rd:DefaultName>jobName</rd:DefaultName><Style><Border><Color>LightGrey</Color><Style>Solid</Style></Border><PaddingLeft>2pt</PaddingLeft><PaddingRight>2pt</PaddingRight><PaddingTop>2pt</PaddingTop><PaddingBottom>2pt</PaddingBottom></Style></Textbox></CellContents></TablixCell></TablixCells></TablixRow></TablixRows></TablixBody><TablixColumnHierarchy><TablixMembers><TablixMember /><TablixMember /></TablixMembers></TablixColumnHierarchy><TablixRowHierarchy><TablixMembers><TablixMember><Group Name="Details4" /></TablixMember></TablixMembers></TablixRowHierarchy><DataSetName>DataSet2Values</DataSetName><Top>0.49875in</Top><Left>1.32638in</Left><Height>0.25in</Height><Width>1.28471in</Width><ZIndex>3</ZIndex><Visibility><Hidden>=Sum(Fields!sectionValue.Value, "DataSet2Values")&lt;1</Hidden></Visibility><Style><Border><Style>None</Style></Border></Style></Tablix></ReportItems><Height>2.03652in</Height><Style /></Body><Width>8.31249in</Width><Page><LeftMargin>1in</LeftMargin><RightMargin>1in</RightMargin><TopMargin>1in</TopMargin><BottomMargin>1in</BottomMargin><Style /></Page><AutoRefresh>0</AutoRefresh><DataSources><DataSource Name="SharedDataSource"><DataSourceReference>SharedDataSource</DataSourceReference><rd:SecurityType>None</rd:SecurityType><rd:DataSourceID>fa5e4ead-f25a-4158-852f-cea3c76cd98e</rd:DataSourceID></DataSource></DataSources><DataSets><DataSet Name="DataSet1"><Query><DataSourceName>SharedDataSource</DataSourceName><CommandText>select distinct comType.Id comTypeId,pos.Id posId ,comType.Name comTypeName from Competence com
left join CompetenceCategory comcat on com.Name_id=comcat.Id
left join CompetenceName comName on comcat.Name_id=comName.Id
left join CompetenceType comType on comType.Id=com.Type_id
left join JobDescription job on com.JobDescription_id=job.Id
left join Position pos on job.Id=pos.JobDescription_id
where pos.IsVertualDeleted=0 and job.IsVertualDeleted=0 and comName.IsVertualDeleted=0 and comcat.IsVertualDeleted=0 and com.IsVertualDeleted=0</CommandText><rd:UseGenericDesigner>true</rd:UseGenericDesigner></Query><Fields><Field Name="comTypeId"><DataField>comTypeId</DataField><rd:TypeName>System.Int32</rd:TypeName></Field><Field Name="posId"><DataField>posId</DataField><rd:TypeName>System.Int32</rd:TypeName></Field><Field Name="comTypeName"><DataField>comTypeName</DataField><rd:TypeName>System.String</rd:TypeName></Field></Fields><Filters><Filter><FilterExpression>=Fields!posId.Value</FilterExpression><Operator>Equal</Operator><FilterValues><FilterValue>=Parameters!posId.Value</FilterValue></FilterValues></Filter></Filters></DataSet><DataSet Name="DataSetWeights"><Query><DataSourceName>SharedDataSource</DataSourceName><QueryParameters><QueryParameter Name="@posId"><Value>=Parameters!posId.Value</Value></QueryParameter><QueryParameter Name="@Phase_id"><Value>=Parameters!Phase_id.Value</Value></QueryParameter></QueryParameters><CommandText>IF NOT EXISTS (SELECT        templatePositions.Id
                                  FROM            AppraisalPhaseWorkflow phaseWorkflow LEFT JOIN
                                                            AppraisalPhase phase ON phase.Id = phaseWorkflow.Phase_Id LEFT JOIN
                                                            AppraisalTemplateSetting templateSetting ON templateSetting.Id = phase.AppraisalPhaseSetting_id LEFT JOIN
                                                            TemplateAppraisalPositions templatePositions ON templatePositions.AppraisalTemplateSetting_id = templateSetting.Id LEFT JOIN
                                                            Position pos ON pos.Id = templatePositions.Position_id LEFT JOIN
                                                            AppraisalTemplate template ON template.Id = templatePositions.AppraisalTemplate_id
                                  WHERE        phaseWorkflow.IsVertualDeleted = 0 AND phase.IsVertualDeleted = 0 AND templateSetting.IsVertualDeleted = 0 AND 
                                                            templatePositions.IsVertualDeleted = 0 AND pos.IsVertualDeleted = 0 AND template.IsVertualDeleted = 0 AND pos.Id = @posId AND 
                                                            phase.Id = @Phase_id)
    SELECT         template.CompetencyWeight, template.JobDescriptionWeight, template.ObjectiveWeight
     FROM            AppraisalTemplate template LEFT JOIN
                              AppraisalTemplateSetting templateSetting ON template.Id = templateSetting.DefaultTemplate_id
     WHERE        templateSetting.IsVertualDeleted = 0 AND template.IsVertualDeleted = 0 ELSE
                                  SELECT        top(1) template.CompetencyWeight, template.JobDescriptionWeight, template.ObjectiveWeight
                                   FROM            AppraisalPhaseWorkflow phaseWorkflow LEFT JOIN
                                                            AppraisalPhase phase ON phase.Id = phaseWorkflow.Phase_Id LEFT JOIN
                                                            AppraisalTemplateSetting templateSetting ON templateSetting.Id = phase.AppraisalPhaseSetting_id LEFT JOIN
                                                            TemplateAppraisalPositions templatePositions ON templatePositions.AppraisalTemplateSetting_id = templateSetting.Id LEFT JOIN
                                                            Position pos ON pos.Id = templatePositions.Position_id LEFT JOIN
                                                            AppraisalTemplate template ON template.Id = templatePositions.AppraisalTemplate_id
                                   WHERE        phaseWorkflow.IsVertualDeleted = 0 AND phase.IsVertualDeleted = 0 AND templateSetting.IsVertualDeleted = 0 AND 
                                                            templatePositions.IsVertualDeleted = 0 AND pos.IsVertualDeleted = 0 AND template.IsVertualDeleted = 0 AND pos.Id = @posId AND 
                                                            phase.Id = @Phase_id</CommandText></Query><Fields><Field Name="CompetencyWeight"><DataField>CompetencyWeight</DataField><rd:TypeName>System.Single</rd:TypeName></Field><Field Name="JobDescriptionWeight"><DataField>JobDescriptionWeight</DataField><rd:TypeName>System.Single</rd:TypeName></Field><Field Name="ObjectiveWeight"><DataField>ObjectiveWeight</DataField><rd:TypeName>System.Single</rd:TypeName></Field></Fields></DataSet><DataSet Name="DataSet2Values"><Query><DataSourceName>SharedDataSource</DataSourceName><QueryParameters><QueryParameter Name="@posId"><Value>=Parameters!posId.Value</Value></QueryParameter><QueryParameter Name="@Phase_id"><Value>=Parameters!Phase_id.Value</Value></QueryParameter></QueryParameters><CommandText>select phase.Id phaseId,pos.Id posId,job.Name jobName ,
 (select SUM((appcom.Weight*appcom.Rate)/100) from Appraisal app 
left join AppraisalCompetence appcom on appcom.PhaseAppraisal_id=app.Id   
where app.PhaseWorkflow_id=phaseWorkflow.Id
) sectionValue,
(select count(*) from WorkflowStep step where step.Workflow_id=_Workflow.Id and step.Status=0) steps
,
(select sum(template.CompetencyWeight) from AppraisalPhaseWorkflow phaseWorkflow 
left join AppraisalPhase phase on phase.Id=phaseWorkflow.Phase_Id
left join AppraisalTemplateSetting templateSetting on templateSetting.Id=phase.AppraisalPhaseSetting_id
left join TemplateAppraisalPositions templatePositions on templatePositions.AppraisalTemplateSetting_id=templateSetting.Id
left join Position pos on pos.Id=templatePositions.Position_id
left join AppraisalTemplate template on template.Id=templatePositions.AppraisalTemplate_id
where phaseWorkflow.IsVertualDeleted=0 and phase.IsVertualDeleted=0 and
 templateSetting.IsVertualDeleted=0 and templatePositions.IsVertualDeleted=0 and
 pos.IsVertualDeleted=0 and template.IsVertualDeleted=0 and pos.Id=@posId and phase.Id=@Phase_id) as weightPos,
 ( select sum(template.CompetencyWeight) from  AppraisalTemplate template 
left join AppraisalTemplateSetting templateSetting on template.Id=templateSetting.DefaultTemplate_id
where  templateSetting.IsVertualDeleted=0 and  template.IsVertualDeleted=0) as weightDefault 
  from AppraisalPhaseWorkflow phaseWorkflow 
left join AppraisalPhase phase on phase.Id=phaseWorkflow.Phase_Id
left join Position pos on pos.Id=phaseWorkflow.Position_id
left join JobDescription job on job.Id=pos.JobDescription_id
left join WorkflowItem _Workflow on _Workflow.Id=phaseWorkflow.WorkflowItem_id
where phaseWorkflow.IsVertualDeleted=0 and phase.IsVertualDeleted=0 and
 pos.IsVertualDeleted=0  and job.IsVertualDeleted=0 and _Workflow.IsVertualDeleted=0</CommandText></Query><Fields><Field Name="phaseId"><DataField>phaseId</DataField><rd:TypeName>System.Int32</rd:TypeName></Field><Field Name="posId"><DataField>posId</DataField><rd:TypeName>System.Int32</rd:TypeName></Field><Field Name="jobName"><DataField>jobName</DataField><rd:TypeName>System.String</rd:TypeName></Field><Field Name="sectionValue"><DataField>sectionValue</DataField><rd:TypeName>System.Double</rd:TypeName></Field><Field Name="steps"><DataField>steps</DataField><rd:TypeName>System.Int32</rd:TypeName></Field><Field Name="weightPos"><DataField>weightPos</DataField><rd:TypeName>System.Double</rd:TypeName></Field><Field Name="weightDefault"><DataField>weightDefault</DataField><rd:TypeName>System.Double</rd:TypeName></Field></Fields><Filters><Filter><FilterExpression>=Fields!posId.Value</FilterExpression><Operator>Equal</Operator><FilterValues><FilterValue>=Parameters!posId.Value</FilterValue></FilterValues></Filter><Filter><FilterExpression>=Fields!phaseId.Value</FilterExpression><Operator>Equal</Operator><FilterValues><FilterValue>=Parameters!Phase_id.Value</FilterValue></FilterValues></Filter></Filters></DataSet></DataSets><ReportParameters><ReportParameter Name="posId"><DataType>Integer</DataType><Prompt>posId</Prompt></ReportParameter><ReportParameter Name="Phase_id"><DataType>Integer</DataType><Prompt>Phase id</Prompt></ReportParameter></ReportParameters><Language>en-US</Language><ConsumeContainerWhitespace>true</ConsumeContainerWhitespace><rd:ReportUnitType>Inch</rd:ReportUnitType><rd:ReportID>f3fcc4b2-7288-4912-8f02-5fbfccaeb27b</rd:ReportID></Report>